//                                            `/+o/.
//                        .+sso+/:oydyo/:-:+shdys/    `-:.     `-/+o+/`
//                    `/sdh+/::/::ss:`ymdhyso//hmMNyhNNms+ososys+/-:/shms/`
//                 .+hNNy++oo+/.`.--/osyhdmNNMMMMMMMMMNdsssssoso+hhhhsoo+ymdo.
//               -smNy/+ymmmmmNNNNMNMMMMMNNNmmNMMMMMMMMMho:///:--shydNMMNdo-sNs`
//             -hNd+-sNMNdmNMMMNNNMNNNMMMddNMMNNmNMMMMMMNmy+///::/:-:/++ymNNdmMN:
//           `sNMs`+NMNNNMMMMNNNMMMMMMNmhyso///+ohMmoNMmoo+/::/-:oymNNmsosshdhmMM/
//          +NMMy`hMMMhyNMNMMNNNMds:-.`-:syddmNMMmyo`+yMMho:..-+//++omMNNNNNNNmdNMs
//        :mMMMh`yMNdodNNNMNMMMs.+sdmmmmmdhNMMMNhy/..`-syhNmdyssso+/.`:yNMMMMNMNMMMy
//       :NMNh:-+MMh+mdNNNNNMd.+NNMMMMMMMMmho:-......:--::ohNMMMMMMNmNy/.oNMNmNMNMMMs
//      :NMm+/dmmMNydyhNdhMMN.yMMNmhysso+:-``        ```.--:/+sdMMMMMNNNm:-mMNNNNMMMMy
//     :NMy/hNMMMMmNddsh/NmMy-Mms:..`.--.`                ``..-.:yNMMMMNMNs:NMMMNNNNMMy
//    :NNy/mMMMMMMmNMMshsNdMo/d-...``                       ```...-yMMMNNMd`NMMNMdmoNMM-
//   /mMm+NMNNMMNMNNNNNNNNMMmom/                              ```..`+NMMMMh`NMMMMNNdhNMh
//  +NMMmmMNyNMNMMMMMNmmmNMdNNyh+.                             ``````/NMMM::MMMMNMNNmNMN
// +MNNMMMNymMNNMMMNNNNNMh+:+dNmddhyoo+`                        ````.`sMMN`sMNNMNNMNNNNN
// dNNNMNNddMNNNNNNmymMN+---::/shdhyyy:                         `````..hMo.NMNMNMMMNmMMd
// dNNNMMNmNNNmmNMNdNMM+.-..----.-:::.                          ````...:mh/NMMMNMMMNNMMh
// sMNNMMNMNNmyNMNdmNMo--.....                                  ``...---:dNMNMMNMMNNNMMN.
// :NNNMMMNNNsmMNmMNMy...`.-.`                                    `.-----:odNmmNMMMMMNMMo
// .NMMMmMMMNmMNNNNMm:-.```..                                       ``-----:/o//dMMMNMMMm
// .NMMMNMMNMMNMNNNNs--.``...                                          `....---..dMNMMMMM`
// .NNMMNNNNNMMMNNNN:-...`...                                           ```.....`+MMMMMMM.
// .MNNNNNNNMMMMMNNy.......-.`                                          ``..---.`.NMMMMMM`
// `NMNMMNNNMMNMMMm-...`.-----.`                                        ``.-----.`yMMMMMd
//  dMMMNNNNMMNNMMo`-....----..`          ``                      `.`` ```.------`:MMMMM-
//  /MMNMNNNMMNMMN-`.`..-.--.` `--..-:-.-.``..``               ```.-......--.----..NMMMd
//  `mMNMNNMMMNNMN.``...-.-../hddyysyhysyyso+--/::-..--...----:::+syyyyhhdddy+:-.-.hMMM:
//   :NNNNNNMMMMMN.`....--.:dy/:-.-/+++ososss+/:+shyo/::/:+os+:+syosyoso+/://ss//.`+MMm
//    +MdmNNMNMMMN+.--....:+-.-:+ooymdddmdhyo++ss+/yMo.`..oNsyhdhmdmmmmNmdo:-.--:+-:MM/
//   `y/..-+dNNMMMo-shhyo++--+sso-`dsymoso.smyso+//.od+/:/ho+yyhd/ymsNhyy./yy/``.-hhmm`
//   .s+md+- oMMMm``.-/sy//-.+/s.  odys+s-  /shyso+.sm+:::yd/hh+:`.hyyhy- `/y/.` `hs/s`
//   -oyMNyhs:NMMo     `.-`         .---` ``.`/::+s/ms````-mo+:`````.--` ````     `sNm`
//   `hsMh`.hymMM:       `-         `          .:+:hy`     od:-`                  .+sM-``
//    o+o/``-/mMM-        .-                ``.```hy`       s.`.`                 -/+M+``
//   .s `./NMMMM-         --            ````  `:ho`        .s`  ```             ./.+My`
//    /: `+MMdMM/          -.  `       `   ..+++-           :d/.             ``:o-`oMy
//     o. .sdNMMm`            `--:://+//.`-///:.           `.ohooo:-.`` `.-:+//:..`hMy
//     `s```.yMMMs                  ```     .y+  `::.:----.-``o:-::/:::--:::-----..mMo
//      :s` `oMNMN-                         :N+  -NNhy/:/sds./:..----------------`/MN.
//       +o``-NMNMd`                      `-syyoo++/.++:so/+yN+..--....-..-....--`dM+
//        +:.`oMNNN`                     .:-` `.::.` `--..---/+/---.```........-.:d:
//         ./++Ny::`                   `--`          .--..-----::-..```......---.s.
//           `:os.--`                  .`            `.. ``.------.`.```..-----.:o
//             `h-..`                 ``        .:syy/-/ydho-.--...`````.------.+.
//              +o`.`                        ./ymNNNNNNNmmNNNh:....``.```.-----:s
//              `h-`.                    -/+oyo/:----:---.--:+sso:........--::-+:
//               /d...                 `.++:  -:--/+:/oo+o++-.``--.....-----:-:y
//               `Md:.`                ``     `-:/+ooooo+/-........-----------yo
//                mNNs-`                     `..-/oo+://:/oo:......----------os
//                h:+md:.                  ...``.`         `------.---------++
//               `h..-+ddo.`                            ``.----------------s:
//                 h` .--/ydy:`                   `...--------------------+y.
//                 h`   ..--+yds+.`               `....----------------:+dN`
//                `y      `.-.-:sdhs:.`    `...````..----------------:smsdm
//                `h         .--..-+ymdy+/:----:----------------.-/shs+.`os
//                `h           `..--..:sdmmhyo/::----------::/+syhy/....`+-
//                -y              `..--..--/oosyyyhhhyyyssoooo/:.`...`.` /-
//                `.                  `..--.......................````   +`
//                                       `...------..-.........``
//                                           ``..-.--........``
//                                                ```..```


// âš”ï¸ðŸ›¡ï¸â—ï¸â•â“â”â€¼ï¸â‰ï¸ðŸ”±âšœï¸ðŸ”°ðŸ’¬ðŸ’­ðŸ—¯ï¸
//ðŸ“š LIBS
// import '@splidejs/splide/css/core';
// BASE & THEMES STYLES
// import '/front/styleðŸ–Œï¸ðŸ–Œï¸ðŸ–Œï¸/baseðŸ”§/tests.scss'

import '/front/styleðŸ–Œï¸ðŸ–Œï¸ðŸ–Œï¸/ðŸ–Œï¸ðŸªªthemestyles.pcss'
// import '/front/viewsðŸ‘ï¸ðŸ‘ï¸ðŸ‘ï¸/ðŸ–Œï¸ðŸ‘ï¸viewstyles.scss'


//ðŸ•¸ï¸ðŸ•¸ï¸ðŸ•¸ï¸ Browser
import { browserCheck, revCheck } from '/front/startðŸðŸðŸ/browserðŸ•¸ï¸.js'

import { callCenter } from '/front/startðŸðŸðŸ/callcenterðŸ§±.js'

// ðŸ™ MAIN CLASS
import { App } from '/front/jsðŸ§ ðŸ§ ðŸ§ /ðŸ™APP.js'

//ðŸ“š LIBS
//ANIME
import {

  animate,
  createTimer,
  createTimeline,
  createDraggable,
  createAnimatable,
  createScope,
  engine,
  eases,
  onScroll,
  // spring,
  // defaults,
  stagger,
  utils,
  // svg

} from 'animejs'
// } from '@juliangarnierorg/anime-beta'

// import Splitting from 'splitting'
import SplitType from 'split-type'
// import SplitText from '@activetheory/split-text'
// import FontFaceObserver from 'fontfaceobserver'


//ðŸðŸðŸðŸ

if (window.history.scrollRestoration) {
  window.history.scrollRestoration = 'manual'
}

document.documentElement.classList.add('lenis-stopped')

//ðŸ•¸ï¸ Browser INIT
//ðŸš§ðŸš§ðŸš§ esto estÃ¡ a pelo por url, revisar
let global = browserCheck()

global.base = ''
global.first = 1
if (import.meta.env.DEV == true) {

  document.documentElement.classList.add('dev')
  //SANITY
  // global.base = window.location.origin.replace('1234', '8888')
  //WP
  global.base = "https://doom-wp.csskiller.es/"
}
const url = new URL(window.location.href)

if (url.searchParams.has('design') || import.meta.env.DEV) {

  document.documentElement.classList.add('sdevice')
  revCheck()
}
if (url.searchParams.has('preview')) {
  console.log('preview')
  global.preview = 1
  global.previewnonce = url.searchParams.has('preview_nonce') ? url.searchParams.get('preview_nonce') : false
  global.previewid = url.searchParams.has('preview_id') ? url.searchParams.get('preview_id') : false
  global.pageid = url.searchParams.has('page_id') ? url.searchParams.get('page_id') : false

}



//ðŸ“šðŸ“š LIBS INIT

// window.gsap = gsap
// gsap.ticker.remove(gsap.updateRoot)
window.SplitType = SplitType
// window.splitText = SplitText
// window.Splitting = Splitting



const anime = {
  animate,
  createTimer,
  createTimeline,
  createDraggable,
  createAnimatable,
  createScope,
  engine,
  eases,
  onScroll,
  // spring,
  // defaults,
  stagger,
  utils,
  // svg,
}


window.anime = anime
window.anime.engine.timeUnit = 's'



//ðŸŽ¬ðŸŽ¬ðŸŽ¬ Check VIDEO
const video = document.querySelector('#videoLow')
const videoprom = new Promise((resolve) => {
  video
    .play()
    .then(() => {
      video.remove()
      global.lowbat = 1
      resolve(true)
    })
    .catch((error) => {
      global.lowbat = 0
      video.remove()
      resolve(false)
    })
})

//ðŸ™ðŸ™ðŸ™ðŸ™ INIT APP

if (import.meta.env.DEV) {
  const PROM = await Promise.all([
    videoprom,
    //getSkin
    callCenter(global, 'getSkin')

    // POR SI HAY QUE HACER PROMISES DE FUENTES
    // new FontFace('mont','url(/public/fonts/montrealbook.woff2)',{
    //   style:'normal',weight:400
    // })


  ])
    .then((data) => {

      global.lowbat = data[0]
      global.first = 0

      console.log(data[1])
      // console.table(data[1])
      console.log(performance)
      console.log(performance.memory)


      const parser = new DOMParser()

      const loader = parser.parseFromString(data[1]['loader'], 'text/html')
      document.querySelector('#app').insertAdjacentHTML('beforeend', loader.body.textContent)
      global.loader = loader.body.textContent
      const nav = parser.parseFromString(data[1]['nav'], 'text/html')
      document.querySelector('#app').insertAdjacentHTML('beforeend', nav.body.textContent)
      const skin = parser.parseFromString(data[1]['skin'], 'text/html')
      document.querySelector('#app').insertAdjacentHTML('beforeend', skin.body.textContent)


    })
  new App(global)

} else {

  const PROM = await Promise.all([
    videoprom,
  ])
    .then((data) => {
      global.lowbat = data[0]
      global.first = 0
    })
  new App(global)

}




